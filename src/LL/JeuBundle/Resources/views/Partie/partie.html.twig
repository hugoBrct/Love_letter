{% extends '::squelette.html.twig' %}

{% block jeu %}
    <h1>Partie {{ table.id }} !</h1>
    <h2>Etat : {{ table.etat }}</h2>

    <div class="row">
        <div class="col-md-4 col-md-offset-4">
            <a id="lancerPartie" post type="button" class="btn btn-primary" href="{{ path('jeu_lancerPartie', {'id' : table.id}) }}">Lancer partie !</a>
        </div>
    </div>

    {#<ul>
        {% for pioche in listCarte %}
            <li>{{ pioche.carte.nom }} : {{ pioche.carte.point }}</li>
            <img src="{{ asset('skin_cartes/') }}{{ pioche.carte.img }}">
        {% endfor %}
    </ul>#}

    <div class="container">
        <div class="row">

            <div class="col-xs-12">
                <div class="row">
                    <p class="text-center">Let's go !</p>
                </div>
                <div class="row">
                    {% for joueur in listJoueur %}
                        <div class="col-xs-4">
                            <h4>Joueur : {{ joueur.email }} Score : {{ joueur.score }} </h4>
                        </div>
                    {% endfor %}
                </div>
                <br>
                <br>
                <br>
                <div class="row">
                    <div class="col-xs-4 col-xs-offset-4">
                        <h4>Joueur : {{ joueur.email }} Score : {{ joueur.score }} </h4>
                        {% if carteEnMain is not empty %}
                            <h2>non vide</h2>
                            {% for carte in carteEnMain %}
                                <img src="{{ asset('skin_cartes/') }}{{ carte.carte.img }}">
                            {% endfor %}
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>




    <script type="text/javascript">
        var interval = 10000;
        function load() {
            setTimeout(function () {
                $.ajax({
                    url: "{{ path('jeu_refreshPartie') }}",
                    method: "post",
                    complete: load,
                    data: "id=" + {{ table.id }}
                }).done(function (msg) {
                    console.log(msg);
                    window.location.reload();
                });
            }, interval);
        }
        load();


        $("#lancerPartie").on('click', function(){
            function lancerPartie(){

            }
        });

    </script>



{% endblock %}